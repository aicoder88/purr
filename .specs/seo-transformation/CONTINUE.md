# SEO Transformation - Continue Here

## Current Status: Phase 7 - Runtime Enhancements (T36 In Progress)

### ‚úÖ Completed

**Phase 6: Build-Time Validation System** ‚úÖ
- T29-T33: Fully implemented and tested
- Validation runs on every build (~0.1s)
- 183/188 tests passing (5 skipped due to cheerio/Jest compatibility)

**Phase 7: Runtime Enhancements** üöß
- ‚úÖ T34: useEnhancedSEO Hook (complete)
- ‚úÖ T35: Enhanced Schema Component (complete)
- üöß T36: Update Page Components (2/10 pages migrated)
  - ‚úÖ pages/products/trial-size.tsx
  - ‚úÖ pages/products/standard.tsx (NextSeo integrated, schema partial)
  - ‚è≥ 8 pages remaining
- ‚è≥ T37: Runtime Enhancement Tests

### üìã Next Tasks

**IMMEDIATE: Complete T36 - Migrate 8 Remaining Pages**

Apply the `useEnhancedSEO` hook pattern to these high-traffic pages:

1. **pages/products/family-pack.tsx**
2. **pages/blog/most-powerful-odor-absorber.tsx**
3. **pages/blog/best-litter-odor-remover-small-apartments.tsx**
4. **pages/learn/how-it-works.tsx**
5. **pages/learn/faq.tsx**
6. **pages/index.tsx** (homepage)
7. Choose 2 more high-traffic pages from analytics

**AFTER T36: Complete T37 - Runtime Enhancement Tests**

Create test files:
- `__tests__/hooks/useEnhancedSEO.test.ts`
- `e2e/seo/schema-rendering.spec.ts`

---

## Migration Pattern for T36

### 1. Update Imports

```typescript
// Remove these:
import { buildLanguageAlternates, getLocalizedUrl } from '../../src/lib/seo-utils';

// Add this:
import { useEnhancedSEO } from '../../src/hooks/useEnhancedSEO';
```

### 2. Replace Manual SEO Setup

**BEFORE:**
```typescript
const canonicalUrl = getLocalizedUrl('/products/trial-size', locale);
const languageAlternates = buildLanguageAlternates('/products/trial-size');

return (
  <NextSeo
    title={pageTitle}
    description={pageDescription}
    canonical={canonicalUrl}
    languageAlternates={languageAlternates}
    openGraph={{
      title: pageTitle,
      description: pageDescription,
      url: canonicalUrl,
      type: 'product',
      locale: locale === 'fr' ? 'fr_CA' : 'en_CA',
      images: [...]
    }}
  />
);
```

**AFTER:**
```typescript
const { nextSeoProps, schema } = useEnhancedSEO({
  path: '/products/trial-size',
  title: pageTitle,
  description: pageDescription,
  targetKeyword: 'cat litter freshener', // Primary keyword
  schemaType: 'product', // or 'article', 'faq', 'location'
  schemaData: {
    name: productName,
    description: pageDescription,
    image: 'https://www.purrify.ca/optimized/product.webp',
    price: priceValue.toFixed(2),
    priceValidUntil,
    availability: 'https://schema.org/InStock',
    rating: { value: 4.8, count: 127 },
  },
  image: 'https://www.purrify.ca/optimized/product.webp',
  keywords: ['cat litter freshener', 'charcoal additive', ...],
});

return (
  <>
    <NextSeo {...nextSeoProps} />

    {schema && (
      <script
        type="application/ld+json"
        dangerouslySetInnerHTML={{
          __html: JSON.stringify({
            "@context": "https://schema.org",
            "@graph": [
              schema,
              // Keep any existing additional schemas (FAQ, etc.)
              generateFAQSchema(locale),
            ],
          }),
        }}
      />
    )}
  </>
);
```

### 3. Schema Type Guide

| Page Type | schemaType | Required schemaData Fields |
|-----------|------------|---------------------------|
| Product | `'product'` | name, description, image, price, priceValidUntil, availability, rating |
| Blog Article | `'article'` | headline, description, image, datePublished, dateModified, author |
| FAQ | `'faq'` | questions (array of Q&A objects) |
| Homepage | `'organization'` | name, description, logo, url, sameAs |

### 4. Target Keywords by Page

| Page | Primary Keyword |
|------|-----------------|
| trial-size | cat litter freshener |
| standard | cat litter freshener |
| family-pack | cat litter deodorizer |
| how-it-works | activated charcoal litter |
| faq | cat litter odor eliminator |
| blog/most-powerful | odor absorber |

---

## File Locations

- **Hook**: `src/hooks/useEnhancedSEO.ts`
- **Task Spec**: `.specs/seo-transformation/tasks.md` (lines 2498-2575)
- **Tests Location**: `__tests__/hooks/` and `e2e/seo/`
- **Example Migration**: `pages/products/trial-size.tsx` (reference implementation)

---

## Validation Commands

After migrating each page:

```bash
# Type check
pnpm check-types

# Validate SEO
pnpm seo:validate

# Run tests
pnpm test __tests__/seo/

# Build check
pnpm build
```

---

## Success Criteria for T36

- [ ] 10 high-traffic pages migrated to useEnhancedSEO hook
- [ ] All pages use `<NextSeo {...nextSeoProps} />`
- [ ] All schemas generated by hook (except additional schemas like FAQ)
- [ ] No type errors
- [ ] SEO validation passes
- [ ] Build succeeds

## Success Criteria for T37

- [ ] useEnhancedSEO hook tests created
- [ ] E2E schema rendering tests created
- [ ] All new tests pass
- [ ] Test coverage >80% for hook

---

## Continuation Prompt

```
Continue SEO transformation Phase 7 (Runtime Enhancements):

Current status: T36 in progress - 2/10 pages migrated to useEnhancedSEO hook.

Next: Complete T36 by migrating the remaining 8 high-traffic pages:
1. pages/products/family-pack.tsx
2. pages/blog/most-powerful-odor-absorber.tsx
3. pages/blog/best-litter-odor-remover-small-apartments.tsx
4. pages/learn/how-it-works.tsx
5. pages/learn/faq.tsx
6. pages/index.tsx
7-8. Choose 2 more from analytics

Follow the migration pattern in .specs/seo-transformation/CONTINUE.md

Reference implementation: pages/products/trial-size.tsx

After T36: Complete T37 (Runtime Enhancement Tests)
- Create __tests__/hooks/useEnhancedSEO.test.ts
- Create e2e/seo/schema-rendering.spec.ts

All commits should follow pattern: "feat(seo): T36 - migrate [page-name] to useEnhancedSEO hook"
```
